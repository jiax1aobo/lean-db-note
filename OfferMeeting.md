## JD

#### 反问

- 目前部门的业务中，算法落地的核心场景是什么？
- 和其他部门的业务是如何协作的？
- 核心的技术栈有哪些？

## 戴中间件

# C语言数据传输中间件研发所需知识体系

开发C语言的数据传输中间件需要掌握多方面的知识，以下是系统的知识框架：

## 一、核心基础知识

### 1. C语言深度掌握
- **内存管理**：malloc/free机制、内存池实现、内存泄漏检测
- **指针与数据结构**：复杂指针操作、自定义数据结构设计
- **多线程编程**：pthread、锁机制(互斥锁/读写锁/自旋锁)、原子操作
- **网络编程**：socket API、TCP/UDP协议栈实现
- **IO模型**：阻塞/非阻塞IO、select/poll/epoll、IO多路复用

### 2. 计算机系统原理
- **操作系统原理**：进程间通信(共享内存/管道/消息队列)、系统调用
- **网络协议栈**：TCP/IP协议族、拥塞控制、滑动窗口
- **计算机体系结构**：字节序、CPU缓存一致性、DMA传输

## 二、网络通信关键技术

### 1. 协议设计
- **二进制协议**：TLV格式、Protocol Buffers、FlatBuffers
- **文本协议**：JSON/XML序列化与解析
- **私有协议设计**：报文头设计、校验和算法、压缩加密

### 2. 高性能网络框架
- **Reactor模式**：事件驱动架构实现
- **零拷贝技术**：sendfile、splice、mmap
- **连接池设计**：长连接维护、心跳机制
- **流量控制**：滑动窗口实现、背压机制

## 三、中间件核心技术

### 1. 数据传输核心功能
- **可靠传输**：重传机制、ACK确认、顺序保证
- **多路复用**：单连接多通道传输
- **断点续传**：文件传输校验与恢复
- **压缩加密**：zlib/LZ4压缩、TLS/SSL加密

### 2. 性能优化技术
- **高性能队列**：无锁队列(ring buffer)实现
- **内存优化**：内存池、对象池技术
- **多线程模型**：Leader-Follower模式、线程池
- **批处理机制**：Naggle算法优化

## 四、高级主题

### 1. 跨平台开发
- **平台适配层**：Windows/Linux/macOS兼容处理
- **编译器特性**：GCC/Clang/MSVC差异处理
- **系统API封装**：epoll/kqueue/iocp统一封装

### 2. 可观测性设计
- **监控指标**：吞吐量、延迟、错误率统计
- **日志系统**：分级日志、异步日志、日志回滚
- **跟踪系统**：请求链路跟踪实现

### 3. 容错与高可用
- **故障检测**：心跳检测、超时重试
- **负载均衡**：加权轮询、一致性哈希
- **熔断降级**：异常流量处理机制

## 五、开发工具链

### 1. 调试与测试
- **调试工具**：GDB、Valgrind、strace
- **性能分析**：perf、vtune、火焰图生成
- **单元测试**：Check框架、Google Test
- **压力测试**：wrk、JMeter

### 2. 构建与部署
- **构建系统**：CMake/Makefile自动化构建
- **持续集成**：Jenkins CI/CD流水线
- **容器化**：Docker镜像打包与部署

## 六、典型中间件实现案例

### 1. 消息队列中间件
```c
// 简化的消息队列核心结构
typedef struct {
    void** messages;      // 消息指针数组
    size_t capacity;      // 队列容量
    size_t head;          // 队首索引
    size_t tail;          // 队尾索引
    pthread_mutex_t lock; // 互斥锁
    pthread_cond_t cond;  // 条件变量
} message_queue_t;
```

### 2. RPC框架核心
```c
// RPC调用处理流程
void rpc_server_worker(void* arg) {
    while(1) {
        rpc_request_t* req = queue_pop(global_queue);
        rpc_response_t resp = process_request(req);
        network_send(req->client_fd, &resp);
        free_request(req);
    }
}
```

## 七、学习路径建议

1. **基础阶段**：
   - 深入理解C指针和内存管理
   - 掌握Linux系统编程
   - 学习TCP/IP协议实现

2. **进阶阶段**：
   - 研究开源中间件(如ZeroMQ、Redis)
   - 实现简易版消息队列
   - 开发多线程服务器框架

3. **高级阶段**：
   - 性能优化与调优
   - 设计跨平台通信框架
   - 实现分布式系统组件

开发数据传输中间件需要理论与实践相结合，建议通过实际项目逐步深入，同时关注行业主流开源实现的设计思想。

---

## 涛思数据库

- 部门目前的有哪些技术攻关的方向？
- 对新入职的研发，3个月内要求承担哪些研发任务？6个月内要求承担哪些研发任务？
- 2022，5～6月份有一个提交的高峰，发生了什么。

文件系统

网络

算法题：非递减序列中指定元素的起始位置和结束位置。（用两次二分法，`lower_bound` + `upper_bound`）

---

## PingCap (TiDB)

反问

- 请问，TiDB研发部门目前有哪些新的技术研发的方向？
- 请问，对新入职的人的要求是怎样的？3个月内需要承担什么样的研发工作？6月内需要承担什么样的研发工作？

算法：

- 给你一个整数数组`nums`，请你使用$O(n)$的时间复杂度和$O(1)$的空间复杂度来找出数组中的众数，给出的测试用例保证众数的整数在数组中出现的次数大于$n/2$。

```c++
int findMaj(std::vector<int> &nums) {
    int maj, cnt = 0, n = nums.size();
    for(int i = 0; i < n; i++) {
        if(cnt == 0) {
            maj = nums[i];
        } else {
            if(maj == nums[i])
                cnt++;
            else
                cnt--;
        }
    }
    return maj;
}
```


反问：

- 部门目前的有哪些技术攻关的方向？
- 对新入职的研发，3个月内要求承担哪些研发任务？6个月内要求承担哪些研发任务？

二面反问：

- 当前的研发重点集中在哪些方面？
- Titan存储插件是负责大Value的存储的，里面介绍了Flush和Compact时会把大Value从LSM-Tree分离出来单独存储。查询时涉及到大Value是如何导航到Blob File里的呢？

为何离职：

- 
- 并且我也被TiDB社区的专业和技术力所感染，因此我觉得TIDB是长期深根数据库的好去处。

HR? maybe?

- 对PingCAP的印象：和之前的面试官聊过之后，我对PingCAP这个平台很感兴趣。开源社区驱动加企业级服务的这种商业模式我也比较看好，这条路经再国外比较成功，但是国内数据库行业中，PingCAP算是比较独特的一条路。
- 对薪资待遇的要求：根据我在数据库行业的经验和内核研发岗位的理解，结合市场行情，我期望的薪资范围是月薪19~20 k左右，我也会根据薪资岗位的整体发展空间和公司福利灵活考虑。

## HRBP面-自我介绍

面试官您好，我叫贾小博。目前是在科蓝软件的数据库部门做SUNDB内核研发，主要是负责SQL引擎模块。平时的主要工作内容是功能研发，以及BUG修复。我参与的项目也基本都是涉及SQL引擎模块的功能研发项目，像DBLink项目，主要的技术点就是对SQL处理以及执行器部分的改造、以及对ODBC会话和Driver的管理。我参与的多表插入功能也是对Oracle相关功能的兼容实现，也主要是对执行引擎模块的改动。我对TiDB的了解首先就是国内领先的分布式关系型数据库，当然我知道TiDB在国际市场中，尤其是开源数据库领域也是占有一席之地的（毕竟是NewSQL理论的首个完整开源实现）。其次是我知道TiDB的分布式架构是存算分离架构，计算、存储和管理节点划分明确，这和我们的产品SUNDB的分布式架构很不相同，尤其是TiDB实现了TiFlash列存引擎来支持AP需求，这给我的印象就是很全面。所以，我非常感谢能有这次面试机会和您交流。

### 职业规划

> - 你未来3~5年的职业规划是怎样的？
> - 你希望在本公司成长为怎样的人？

1. 短期（1-3个月）内我计划通过持续学习，快速胜任一些初级的工作。之后我希望能够独自承担功能研发。
2. 我期望通过自己的努力和学习，成长为技术骨干，最终参与到核心项目中去。
3. 具体而言，我希望通过学习和实践，在优化器以及存储引擎方向走得更远。

### 离职原因

- 目前我们公司在经营上的调整，数据库业务有所收缩。这也促使我开始思考未来几年的职业规划，因为现在项目不多的状况下，想要紧靠自身的学习而没有更多的项目实操，对提升自己的技能和职业发展很不利，所以我考虑离职。

### 团队合作与冲突处理

> - 你遇到过和同事意见不合的情况嘛？怎么解决的？
> - 你如何与非技术人员沟通复杂的技术问题？

- 遇到意见不同的情况下，我们会先整理一下各自的不同意见（如有必要整理出文档），然后再讨论，确保讨论的范围。讨论以解决问题为导向，只要对哪种意见能帮助解决问题达成一致就结束讨论（如果是复杂的问题，会在Trac系统里开一个ticket，让大家都参与讨论）。
- 我一般会先了解非技术人员想了解这个复杂技术问题是想解决什么问题？然后针对性地解答他的疑惑，尽量使用便于理解的语言。

### 压力与挑战应对

> - 你遇到的最大的技术挑战是什么？你是如何克服的？
> - 如果你负责的模块上线后出现严重问题，你会怎么做？

- 
- 上线之前要做充分的测试，每个阶段都做好评审和review。如果出现了问题就根据应急预案操作。比如替换成没问题的版本啊，之类的。

### 对公司岗位的理解

> - 你怎么看我们公司在数据库领域的竞争力？
> - 你对我们产品的哪些方面比较感兴趣？

- TiDB的优势我认为是全面，分布式能力、HTAP混合能力。另外一个就是整套的解决方案，也就是说除数据库核心能力外的生态非常健全。最大的竞争力还是技术力（设计文档公开，技术自信）。
- 对产品的高可靠性和存储引擎感兴趣。

### 自身价值

- 我在SQL引擎模块的研发经验是我最大的技术优势。
- 另外我对主流分布式事务以外的自研分布式事务方案有所了解。

### 反问

- 你们团队目前的重点方向有哪些？未来有机会参与那一类工作？
- 公司对技术人员的成长路径是怎么规划的？
- 团队内部的学习氛围和技术分享机制是怎么样的？
- 薪资范围18～20

谈薪反问：

- 公司的薪资构成（基本+岗位+绩效）、福利？

---

## 自然原数

社保基数：6.8K

公积金基数：5.2K，12%

期望薪资：24K -> 22K（20K以下不考虑）

#### 职业规划：

- 短期内我计划快速地适应工作节奏，学习咱们这边的技术体系，然后能够配合其他组员完成项目。
- 中期我计化持续学习咱们的技术架构，能够独立负责项目的开发，成为咱们的技术骨干。
- 长期计划是通过学习行业内的前沿，帮助技术落地到我们自己的产品。

反问：

- 薪资构成？是否有奖金？加班费等？
- 稳定客户有哪些？
- 新入职的研发前三个月将会承担什么样的研发任务？

---

## 偶数科技

代码能力+算法，还有简历中涉及到的计算机相关的技术知识面

算法题：

- 二叉树的最大路径和
- 数组的逆序对数量

