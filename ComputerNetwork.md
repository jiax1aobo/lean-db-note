> - 谈一谈对计算机网络的了解

# OSI七层模型与TCP/IP四层协议

计算机网络中有个著名的网络通信协议框架 OSI ：OSI (Open System Interconnection) 是国际标准组织 ISO 提出的一种理论模型，它分为 7 层，每一层各司其职，通过标准化接口与上下层交互（从下到上是物理层、数据链路层、网络层、传输层、会话层、表示层、应用层）。

但在实际的应用场景中使用的是 TCP/IP 模型，这个模型和 OSI 模型有相似的地方。分为链路层、网络层、传输层和应用层。

- 链路层关注的是在网络的物理链路上传输数据。它会把上层传来的数据包（Package）封装进数据帧（Frame）中进行传递。
- 网络层关注的是将数据包（Package）从源主机发送到目标主机。
- 传输层所关注的是为不同主机上的应用程序提供端到端的通信服务。传输层常用的协议有 TCP 和 UDP 。
- 应用层就是服务程序所使用的自定义协议，如HTTP协议等。

> - 谈谈 DNS 的了解



> - 谈一谈 TCP 协议

# TCP协议

TCP协议是传输层的基于连接的可靠的传输协议。基于连接是指在TCP协议真正开始工作前首先要在通信的两端之间创建通信链路。

### 建立TCP连接的三次握手过程

因为需要三次报文传输，所以又称三次握手。

1. `connect()` 调用导致客户端 TCP 结点发送一个 SYN 报文到服务器端 TCP 结点。这个报文将告知服务器有关客户端 TCP 结点的初始序列号（在图中以 M 来标记）。这个信息是必要的，因为序列号不会从 0 开始。
2. 服务器端 TCP 结点必须确认客户端发送来的 TCP SYN 报文，并告知客户端自己的初始序列号（在图中以 N 来标记）。（需要两个序列号是因为流式套接字是双向的。）服务器端 TCP 结点返回一个同时设定了 SYN 和 ACK 控制位的报文，这样就能同时执行这两种操作。
3. 客户端 TCP 结点发送一个 ACK 报文来确认服务器端 TCP 结点的 SYN 报文。

### TCP建立时的初始序列号为要随机产生

首先TCP连接中两个方向的数据流中的每个字节都有自己的逻辑序号。逻辑序号包含在TCP报文段的一个字段中，它是这个报文段第一个字节的逻辑序号。

- 逻辑序号使得不同的报文段能够区分出先后顺序，从而使得报文段被接受者正确组成完整的信息。
- 初始序号（ISN）不是从0开始的，而是通过一个算法来生成的，该算法会递增分配给后续 TCP 连接的 ISN（为防止出现前一个连接中的分段与这个连接中的分段混淆的情况）。这个算法也使得猜测 ISN 变得困难起来。序号是一个 32 位的值，当到达最大取值时会回到 0。

### 流量控制：数据缓冲区

TCP 流量控制算法采用了所谓的滑动窗口算法，它允许包含总共 N 字节（提供的窗口大小）的未确认段同时在发送者和接收者之间传输。如果接收 TCP 的进入数据缓冲区完全被充满了，那么窗口就会关闭，发送 TCP 就会停止传输数据。

### 拥塞控制：慢启动和拥塞避免算法

慢启动：一开始以低俗传输报文段，但是速度以指数级增长。

拥塞控制：连接建立时，发送TCP会使用一个较小的拥塞窗口，它会限制所能传输的未确认的数据数量。当发送TCP接收到确认时，拥塞窗口会指数级增长，增长到一定阈值后，增长速率变为线形的。

### TCP连接的四次挥手

1. 客户端执行一个主动关闭，这将导致客户端 TCP 结点发送一个 FIN 报文给服务器。
2. 在接收到 FIN 报文后，服务器端 TCP 结点发出 ACK 报文作为响应。之后在服务器端，任何对 read()操作的尝试都会产生文件结尾（即返回 0）。
3. 稍后，当服务器关闭自己这端的连接时，服务器端 TCP 结点发送 FIN 报文到客户端。
4. 客户端 TCP 结点发送 ACK 报文作为响应，以此来确认服务器端发来的 FIN 报文。

## UDP连接

无连接的传输协议。最多能依靠报文的校验和检测数据是否完成。